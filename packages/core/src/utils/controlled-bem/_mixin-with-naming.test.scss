/* stylelint-disable scss/function-no-unknown */
@use 'sass-true' as *;
@use './exports' as *;
@use './globals' as globals;

@mixin testSCSS($elements: true, $modifiers: true, $extras: true) {
  $void: init-controlled-bem(
    $modifiers: $modifiers,
    $elements: $elements,
    $extras: $extras,
    $block: 'myBlock',
    $config: (
      'blockPrefix': '',
    ),
  );

  @include block {
    --hds-test: var(--var-base);

    @include element('element') {
      --hds-test-element: var(--var-element);

      @include modifier('dark') {
        --hds-test-element-dark: var(--var-element-dark);
      }
    }

    @include modifier('light') {
      --hds-test-light-modifier: var(--var-light-modifier);

      @include element('element') {
        --hds-test-element: var(--var-element);

        span {
          --hds-test-light-modifier-span: var(--var-light-modifier-span);
        }
      }
    }
  }
}

@include describe('Test different parameters') {
  @include it('With a defined elements, only rules in it are outputted.') {
    @include assert {
      @include output {
        @include testSCSS(
          $modifiers: (
            'dark': (
              'element': true,
              'alias': 'really-dark',
            ),
            /// renaming makes "ultra-light" only allowed element
            /// 'light': true,
            'light':
              (
                'element': true,
                'alias': 'ultra-light',
              ),
          ),
          $elements: (
            'base': true,
            'element': 'nice-element',
          )
        );
      }

      @include expect {
        .myBlock {
          --hds-test: var(--var-base);
        }

        .myBlock .nice-element {
          --hds-test-element: var(--var-element);
        }

        .myBlock .nice-element.really-dark {
          --hds-test-element-dark: var(--var-element-dark);
        }

        .myBlock.ultra-light {
          --hds-test-light-modifier: var(--var-light-modifier);
        }

        .myBlock.ultra-light .nice-element {
          --hds-test-element: var(--var-element);
        }

        .myBlock.ultra-light .nice-element span {
          --hds-test-light-modifier-span: var(--var-light-modifier-span);
        }
      }
    }
  }
}
