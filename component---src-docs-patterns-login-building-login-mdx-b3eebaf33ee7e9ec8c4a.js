"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9306],{40008:function(e,n,t){t.d(n,{S:function(){return c}});var a=t(77897),l=t(67294),s=(t(7568),t(7444)),r=t(61655),o={statusLabel:"StatusLabel-module_statusLabel__3R2J2 status-label_hds-status-label__1L8YI",statusLabelWithIcon:"StatusLabel-module_statusLabelWithIcon__5lKVk status-label_hds-status-label--with-icon__3bHf6",statusLabelIcon:"StatusLabel-module_statusLabelIcon__2SAou status-label_hds-status-label-icon__3K58a",info:"StatusLabel-module_info__3YrAe status-label_hds-status-label--info__J28-H",success:"StatusLabel-module_success__2BfdX status-label_hds-status-label--success__3jiST",alert:"StatusLabel-module_alert__2VR8r status-label_hds-status-label--alert__1ecsX",error:"StatusLabel-module_error__zNgn8 status-label_hds-status-label--error__2EYi4"};(0,s.s)(".status-label_hds-status-label__1L8YI{--status-label-background:var(--color-black-10);--status-label-color:var(--color-black-90);--status-label-height:32px;background-color:var(--status-label-background);border-radius:20px;color:var(--status-label-color);display:inline-block;font-size:var(--fontsize-body-s);line-height:var(--status-label-height);min-height:var(--status-label-height);padding:0 var(--spacing-2-xs);vertical-align:middle}.status-label_hds-status-label--with-icon__3bHf6{align-items:center;display:inline-flex;padding-left:var(--spacing-3-xs)}.status-label_hds-status-label-icon__3K58a{height:var(--spacing-m);margin-right:var(--spacing-3-xs);width:var(--spacing-m)}.status-label_hds-status-label--info__J28-H{--status-label-background:var(--color-info);--status-label-color:var(--color-white)}.status-label_hds-status-label--success__3jiST{--status-label-background:var(--color-success);--status-label-color:var(--color-white)}.status-label_hds-status-label--alert__1ecsX{--status-label-background:var(--color-alert)}.status-label_hds-status-label--error__2EYi4{--status-label-background:var(--color-error);--status-label-color:var(--color-white)}");var i=function(e){var n=e.icon;return l.createElement("span",{className:o.statusLabelIcon,"aria-hidden":"true"},n)},c=function(e){var n=e.children,t=e.className,s=e.dataTestId,c=e.type,d=void 0===c?"neutral":c,h=e.iconLeft,u=(0,a._)(e,["children","className","dataTestId","type","iconLeft"]);return l.createElement("span",Object.assign({className:(0,r.c)(o.statusLabel,o[d],h&&o.statusLabelWithIcon,t),"data-testid":s},u),h&&l.createElement(i,{icon:h}),n)}},96549:function(e,n,t){t.r(n);var a=t(11151),l=t(67294),s=t(89482),r=(t(38753),t(55725));function o(e){const n=Object.assign({h1:"h1",a:"a",span:"span",p:"p",h2:"h2",h3:"h3",h4:"h4",ul:"ul",li:"li",code:"code",strong:"strong"},(0,a.ah)(),e.components),{InternalLink:t,ExternalLink:o}=n;return o||i("ExternalLink",!0),t||i("InternalLink",!0),l.createElement(l.Fragment,null,l.createElement(n.h1,{id:"building-login",style:{position:"relative"}},"Building login",l.createElement(n.a,{href:"#building-login","aria-label":"building login permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(r.Z,{type:"error"},"Draft"),"\n",l.createElement(s.Z,null,l.createElement(n.p,null,"The Login pattern describes how HDS Login components and HDS Header login functionalities are meant to work together.")),"\n",l.createElement(n.h2,{id:"principles",style:{position:"relative"}},"Principles",l.createElement(n.a,{href:"#principles","aria-label":"principles permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.h3,{id:"login-components",style:{position:"relative"}},"Login components",l.createElement(n.a,{href:"#login-components","aria-label":"login components permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,l.createElement(t,{href:"/components/login"},"HDS Login")," components include React context, components and hooks for\nhandling user authorisation, API tokens, session polling and GraphQL queries."),"\n",l.createElement(n.h4,{id:"requirements",style:{position:"relative"}},"Requirements",l.createElement(n.a,{href:"#requirements","aria-label":"requirements permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"The following steps are required for user authentication:"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"The url of the service connecting to the OIDC server ",l.createElement(t,{href:"/components/login/usage/#loginprovider"},"must be registered with a scope and a client ID"),"."),"\n",l.createElement(n.li,null,"The callback from the OIDC server should be handled with the ",l.createElement(t,{href:"/components/login/usage/#logincallbackhandler"},"LoginCallbackHandler")," component."),"\n"),"\n",l.createElement(n.h4,{id:"log-in-process",style:{position:"relative"}},"Log in process",l.createElement(n.a,{href:"#log-in-process","aria-label":"log in process permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"Logging in or out of an OIDC server requires browser redirections to the server and back. UI's only show login and logout buttons. No other form elements are needed."),"\n",l.createElement(n.p,null,"The ",l.createElement(n.code,null,"login")," call is asyncronous and may fail if the OIDC server is offline or the service URL is not registered. UI's must indicate loading has started, and possible errors must be handled by the UI."),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/patterns/login/building-login/#header-login-button"},"HDS Header Login button")," handles all of these scenarios."),"\n",l.createElement(n.h4,{id:"log-out-process",style:{position:"relative"}},"Log out process",l.createElement(n.a,{href:"#log-out-process","aria-label":"log out process permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"Logging out is almost identical to the log-in process. It is also asyncronous and may fail."),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/patterns/login/building-login/#header-logout-button"},"HDS Header Logout button")," handles all of these scenarios."),"\n",l.createElement(n.h4,{id:"user-data-from-the-oidc-server",style:{position:"relative"}},"User data from the OIDC server",l.createElement(n.a,{href:"#user-data-from-the-oidc-server","aria-label":"user data from the oidc server permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"User information is stored in tokens which are decrypted by the Login system and an user object is provided to UI's. It holds, for example, user's name and email address."),"\n",l.createElement(n.p,null,"User object can be accessed with the ",l.createElement(t,{href:"/components/login/usage/#useauthenticateduser"},"useAuthenticatedUser")," hook."),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/patterns/login/building-login/#header-user-menu"},"HDS Header User menu")," automatically shows the user's name and initials."),"\n",l.createElement(n.h4,{id:"user-data-from-the-profile-service",style:{position:"relative"}},"User data from the Profile Service",l.createElement(n.a,{href:"#user-data-from-the-profile-service","aria-label":"user data from the profile service permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,l.createElement(o,{href:"https://profiili.hel.fi"},"Profile information")," is not used by the HDS. It can be fetched\nwith the GraphQL module, but it is not used in HDS components. The user object returned by the OIDC server has a ",l.createElement(n.code,null,"profile"),"\nproperty, but that is just an unfortunate naming convention. It is not the Helsinki Profile."),"\n",l.createElement(n.h3,{id:"headerlogin-components",style:{position:"relative"}},"Header.Login components",l.createElement(n.a,{href:"#headerlogin-components","aria-label":"headerlogin components permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,l.createElement(t,{href:"/components/header"},"HDS Header")," has built-in functionalities for login button as well as\na dropdown user menu. ",l.createElement(n.strong,null,"The Header Login button")," is a variant of ",l.createElement(t,{href:"/components/header/#actionbaritem"},"\nHeader.ActionBarItem\n")," that uses the ",l.createElement(n.code,null,"fixedRightPosition")," prop to have special functionalities in mobile breakpoints. From breakpoint\nM (≥ 768px) and down, the Login button is hidden, and the contents are moved inside the Header.ActionBar component's menu\nalongside NavigationMenu. See more documentation on ",l.createElement(t,{href:"/components/header/#with-login"},"\nHeader.Login\n")," on the Header component page."),"\n",l.createElement(n.p,null,"All Header login components require the ",l.createElement(t,{href:"/components/login/"},"LoginProvider")," React Context. Other Header components can be used to build identical functionalities, but user interactions and data must be handled manually."),"\n",l.createElement(n.h4,{id:"header-login-button",style:{position:"relative"}},"Header Login button",l.createElement(n.a,{href:"#header-login-button","aria-label":"header login button permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/components/header/#header-login-button"},"Login button")," is an action item in the header. It indicates loading progress and handles connection errors."),"\n",l.createElement(n.h4,{id:"header-user-menu-button",style:{position:"relative"}},"Header User Menu Button",l.createElement(n.a,{href:"#header-user-menu-button","aria-label":"header user menu button permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/components/header/#header-user-menu-button"},"User Menu button")," offers placement for user information."),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"The user's name and initials."),"\n",l.createElement(n.li,null,"Can host links and icons."),"\n",l.createElement(n.li,null,"Should host a logout button."),"\n"),"\n",l.createElement(n.h4,{id:"header-logout-submenu-button",style:{position:"relative"}},"Header Logout Submenu Button",l.createElement(n.a,{href:"#header-logout-submenu-button","aria-label":"header logout submenu button permalink",className:"header-anchor after"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",l.createElement(n.p,null,"The ",l.createElement(t,{href:"/components/header/#header-logout-submenu-button"},"Logout Submenu button")," is a submenu item in the header dropdown. It indicates loading progress and handles connection errors."),"\n",l.createElement(n.p,null,"To learn more about the ",l.createElement("strong",null,"Header")," component and its subcomponents, please refer to ",l.createElement(t,{href:"/components/header"},"the component page.")))}function i(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?l.createElement(n,e,l.createElement(o,e)):o(e)}},38753:function(e,n,t){var a=t(67294),l=t(14160);n.Z=e=>{let{src:n,alt:t="Image",style:s={},viewable:r,...o}=e;const i=a.createElement("img",Object.assign({className:"image-container-image",alt:t,src:(0,l.withPrefix)(n),style:s},o));return a.createElement("div",{className:"image-container"},r?a.createElement("a",{className:"image-container-link",href:(0,l.withPrefix)(n),title:t,style:s},i):i)}},89482:function(e,n,t){var a=t(67294),l=t(42972);n.Z=e=>{let{color:n="var(--color-black-90)",size:t="var(--fontsize-body-xl)",style:s={},children:r}=e;return a.createElement("p",{style:{fontSize:t,color:n,maxWidth:600,...s}},(0,l.g)(r))}},55725:function(e,n,t){var a=t(67294),l=t(40008),s=t(42972);n.Z=e=>{let{children:n,...t}=e;return a.createElement(l.S,t,(0,s.g)(n))}}}]);